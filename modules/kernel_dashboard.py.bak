
import streamlit as st
import os
import pandas as pd
import datetime

st.set_page_config(page_title="KINO OS Kernel Integrator", layout="wide")

st.title("ğŸ§  KINO OS Kernel Integrator")
st.subheader("ÎŸÎ»Î¿ÎºÎ»Î·ÏÏ‰Î¼Î­Î½Î¿Ï‚ Î Ï…ÏÎ®Î½Î±Ï‚ Ï„Î¿Ï… Prediction System")

st.markdown("Î‘Ï…Ï„ÏŒ Ï„Î¿ dashboard Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯ Ï‰Ï‚ **ÎºÎµÎ½Ï„ÏÎ¹ÎºÏŒÏ‚ ÎµÎ½Î¿Ï€Î¿Î¹Î·Ï„Î®Ï‚** ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ Ï…Ï€Î¿ÏƒÏ…ÏƒÏ„Î·Î¼Î¬Ï„Ï‰Î½ Ï„Î¿Ï… KINO Prediction System. Î Î±ÏÎ±ÎºÎ¬Ï„Ï‰ ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ Î»Î¯ÏƒÏ„Î± Î¼Îµ ÏŒÎ»Î± Ï„Î± ÎµÎ½ÎµÏÎ³Î¬ modules:")

# Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï†Î±ÎºÎ­Î»Ï‰Î½ Ï€Î¿Ï… Ï€ÎµÏÎ¹Î­Ï‡Î¿Ï…Î½ Ï„Î± modules
modules_dir = "modules"
active_modules = []

if os.path.exists(modules_dir):
    active_modules = sorted([
        name for name in os.listdir(modules_dir)
        if os.path.isdir(os.path.join(modules_dir, name))
    ])
    st.success(f"âœ… Î•Î½Ï„Î¿Ï€Î¯ÏƒÏ„Î·ÎºÎ±Î½ {len(active_modules)} ÎµÎ½ÎµÏÎ³Î¬ modules.")
else:
    st.warning("âš ï¸ ÎŸ Ï†Î¬ÎºÎµÎ»Î¿Ï‚ `modules/` Î´ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ.")

# Î ÏÎ¿Î²Î¿Î»Î® ÎµÎ½ÎµÏÎ³ÏÎ½ modules
for module in active_modules:
    st.markdown(f"- âœ… **{module}**")

st.markdown("---")
st.subheader("ğŸ“Š ÎšÎµÎ½Ï„ÏÎ¹ÎºÏŒÏ‚ ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ & ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·")

placeholder = st.empty()
if st.button("ğŸ” Î•Ï€Î±Î½Î±Ï†ÏŒÏÏ„Ï‰ÏƒÎ· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚"):
    st.rerun()

with st.expander("ğŸ§  Î ÏÎ¿Î²Î¿Î»Î® Kernel Log", expanded=False):
    log_path = "kernel_output/kernel_log.txt"
    if os.path.exists(log_path):
        with open(log_path, "r", encoding="utf-8") as f:
            log_content = f.read()
        st.code(log_content, language="text")
    else:
        st.info("Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Î±ÏÏ‡ÎµÎ¯Î¿ kernel_log.txt")

st.sidebar.title("ğŸ“… Î£Ï…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚")
st.sidebar.write(f"Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±: {datetime.datetime.now().strftime('%d/%m/%Y')}")

