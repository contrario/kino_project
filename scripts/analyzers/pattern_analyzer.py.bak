import sys
import os

# â¤ Î ÏÎ¿ÏƒÎ¸Î­Ï„Î¿Ï…Î¼Îµ Ï„Î¿ path Î³Î¹Î± Î½Î± Î²ÏÎ¯ÏƒÎºÎµÎ¹ Ï„Î± modules
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..', '..')))

from scripts.utils.logger import log_info  # Î£Ï‰ÏƒÏ„ÏŒ import Î¼Îµ Ï€Î»Î®ÏÎ· Î´Î¹Î±Î´ÏÎ¿Î¼Î®

def analyze_patterns(draws):
    """
    Î‘Î½Î±Î»ÏÎµÎ¹ Î¼Î¿Ï„Î¯Î²Î± Î±Ï€ÏŒ Ï„Î¹Ï‚ ÎºÎ»Î·ÏÏÏƒÎµÎ¹Ï‚ ÎšÎ™ÎÎŸ.
    Î .Ï‡. Ï€Î±ÏÎ±ÎºÎ¿Î»Î¿Ï…Î¸ÎµÎ¯ Ï„Î·Î½ ÎµÏ€Î±Î½Î±Î»Î·ÏˆÎ¹Î¼ÏŒÏ„Î·Ï„Î± Î±ÏÎ¹Î¸Î¼ÏÎ½, Î¶ÎµÏÎ³Î· Îº.Î»Ï€.
    """
    log_info("ÎÎµÎºÎ¯Î½Î·ÏƒÎµ Î· Î±Î½Î¬Î»Ï…ÏƒÎ· Î¼Î¿Ï„Î¯Î²Ï‰Î½...")

    # Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±: ÎšÎ±Ï„Î±Î¼Î­Ï„ÏÎ·ÏƒÎ· ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ·Ï‚ ÎºÎ¬Î¸Îµ Î±ÏÎ¹Î¸Î¼Î¿Ï
    frequency = {}
    for draw in draws:
        for number in draw:
            frequency[number] = frequency.get(number, 0) + 1

    sorted_freq = dict(sorted(frequency.items(), key=lambda item: item[1], reverse=True))

    log_info("Î‘Î½Î¬Î»Ï…ÏƒÎ· Î¼Î¿Ï„Î¯Î²Ï‰Î½ Î¿Î»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ.")
    return sorted_freq


# Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Ï‡ÏÎ®ÏƒÎ·Ï‚ Î³Î¹Î± test
if __name__ == "__main__":
    # Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ (Î»Î¯ÏƒÏ„Î± Î±Ï€ÏŒ Î»Î¯ÏƒÏ„ÎµÏ‚ Î¼Îµ 20 Î±ÏÎ¹Î¸Î¼Î¿ÏÏ‚ Î· ÎºÎ¬Î¸Îµ Î¼Î¯Î±)
    sample_draws = [
        [5, 12, 23, 31, 40, 45, 48, 51, 56, 60, 61, 63, 66, 67, 70, 72, 75, 77, 79, 80],
        [1, 5, 9, 12, 14, 22, 30, 34, 35, 40, 42, 45, 48, 51, 60, 66, 67, 70, 79, 80]
    ]

    results = analyze_patterns(sample_draws)
    print("ğŸ“Š Î£Ï…Ï‡Î½ÏŒÏ„Î·Ï„ÎµÏ‚ Î±ÏÎ¹Î¸Î¼ÏÎ½:")
    for number, count in results.items():
        print(f"{number}: {count}")
