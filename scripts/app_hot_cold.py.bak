import streamlit as st
import pandas as pd
import os

# -----------------------------
# Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚
# -----------------------------
st.set_page_config(page_title="KINO Hot & Cold Numbers", layout="centered")

# -----------------------------
# Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
# -----------------------------
DATA_PATH = os.path.join("..", "data", "number_frequencies.csv")

@st.cache_data
def load_data(path):
    try:
        df = pd.read_csv(path)
        df = df.sort_values(by="frequency", ascending=False).reset_index(drop=True)
        return df
    except FileNotFoundError:
        st.error(f"Î¤Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ Î´ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ: {path}")
        return pd.DataFrame(columns=["number", "frequency"])

data = load_data(DATA_PATH)

# -----------------------------
# Î ÏÎ¿Î²Î¿Î»Î®
# -----------------------------
st.title("ğŸ”¥ KINO Hot & Cold Numbers")

if data.empty:
    st.warning("Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Î±.")
else:
    st.subheader("ğŸ¯ Î£Ï…Ï‡Î½ÏŒÏ„Î·Ï„ÎµÏ‚ Î‘ÏÎ¹Î¸Î¼ÏÎ½")
    st.dataframe(data, use_container_width=True)

    st.subheader("ğŸ“ˆ Top 10 Hot Numbers")
    st.write(data.head(10)[["number", "frequency"]])

    st.subheader("â„ï¸ Top 10 Cold Numbers")
    st.write(data.tail(10).sort_values(by="frequency")[["number", "frequency"]])


