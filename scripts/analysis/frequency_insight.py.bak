import sys
import os

# Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· root path Î³Î¹Î± imports
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))

from fetchers.smart_fetch_kino_data import fetch_recent_draws
from core.pattern_analyzer import analyze_draws
from utils.logger import log_info

def main():
    log_info("ğŸ“Š Î•ÎºÎºÎ¯Î½Î·ÏƒÎ· Î±Î½Î¬Î»Ï…ÏƒÎ·Ï‚ ÏƒÏ…Ï‡Î½Î¿Ï„Î®Ï„Ï‰Î½ Î³Î¹Î± Ï„Î¹Ï‚ 100 Ï„ÎµÎ»ÎµÏ…Ï„Î±Î¯ÎµÏ‚ ÎºÎ»Î·ÏÏÏƒÎµÎ¹Ï‚...")

    draws = fetch_recent_draws(100)
    if not draws:
        log_info("âš ï¸ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ ÎºÎ»Î·ÏÏÏƒÎµÎ¹Ï‚.")
        return

    result = analyze_draws(draws)
    most_common = result.get("most_common_numbers", [])

    print("\nğŸ“ˆ Î Î¹Î¿ Î£Ï…Ï‡Î½Î¿Î¯ Î‘ÏÎ¹Î¸Î¼Î¿Î¯ (Top):")
    print("-" * 30)
    for number, count in most_common:
        print(f"Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚: {number:<2} | Î•Î¼Ï†Î±Î½Î¯ÏƒÎµÎ¹Ï‚: {count}")
    print("-" * 30)

if __name__ == '__main__':
    main()
